---
title: Database
description: Prisma, Drizzle, and TypeORM support.
---

PEST.js supports three database ORMs. Each generates its own config files, schema, client setup, and a CRUD example route at `/api/examples`.

## Providers

All three ORMs support:

- **PostgreSQL** — recommended for production
- **MySQL**
- **SQLite** — file-based, no server needed

## ORM setup

<Tabs defaultValue="prisma">
  <TabsList>
    <TabsTrigger value="prisma"><Prisma className="size-4" />Prisma</TabsTrigger>
    <TabsTrigger value="drizzle"><DrizzleORM className="size-4" />Drizzle</TabsTrigger>
    <TabsTrigger value="typeorm"><TypeORM className="size-4" />TypeORM</TabsTrigger>
  </TabsList>
  <TabsContent value="prisma">
    ### Generated files

    <Files>
      <Folder name="prisma" defaultOpen>
        <File name="schema.prisma" />
      </Folder>
      <Folder name="src" defaultOpen>
        <Folder name="lib" defaultOpen>
          <File name="prisma.ts" />
        </Folder>
        <Folder name="routes" defaultOpen>
          <File name="example.ts" />
        </Folder>
      </Folder>
    </Files>

    ### Scripts

    | Script | Command |
    |--------|---------|
    | `db:generate` | `prisma generate` |
    | `db:migrate` | `prisma migrate dev` |
    | `db:push` | `prisma db push` |
    | `db:studio` | `prisma studio` |

    ### First migration

    ```bash title="Terminal"
    npx prisma migrate dev --name init
    ```

    <Callout>
      Prisma is pinned to `^6` to avoid breaking changes in v7.
    </Callout>
  </TabsContent>
  <TabsContent value="drizzle">
    ### Generated files

    <Files>
      <Folder name="src" defaultOpen>
        <Folder name="db" defaultOpen>
          <File name="schema.ts" />
          <File name="index.ts" />
        </Folder>
        <Folder name="routes" defaultOpen>
          <File name="example.ts" />
        </Folder>
      </Folder>
      <File name="drizzle.config.ts" />
    </Files>

    ### Scripts

    | Script | Command |
    |--------|---------|
    | `db:generate` | `drizzle-kit generate` |
    | `db:migrate` | `drizzle-kit migrate` |
    | `db:push` | `drizzle-kit push` |
    | `db:studio` | `drizzle-kit studio` |

    ### Push schema

    ```bash title="Terminal"
    npm run db:push
    ```

    <Callout>
      MySQL uses `$returningId()` instead of `.returning()` since MySQL doesn't support `RETURNING` clauses.
    </Callout>
  </TabsContent>
  <TabsContent value="typeorm">
    ### Generated files

    <Files>
      <Folder name="src" defaultOpen>
        <Folder name="db" defaultOpen>
          <File name="data-source.ts" />
          <File name="index.ts" />
          <Folder name="entities" defaultOpen>
            <File name="user.ts" />
          </Folder>
        </Folder>
        <Folder name="routes" defaultOpen>
          <File name="example.ts" />
        </Folder>
      </Folder>
    </Files>

    TypeORM enables `experimentalDecorators` and `emitDecoratorMetadata` in tsconfig. Entity columns use explicit types (e.g. `@Column("varchar")`, `@PrimaryGeneratedColumn("increment")`) for compatibility with `tsx`/esbuild which doesn't emit decorator metadata.

    ### Scripts

    | Script | Command |
    |--------|---------|
    | `db:migrate` | `typeorm migration:run` |
    | `db:generate` | `typeorm migration:generate` |

    <Callout>
      SQLite uses `datetime` column type instead of `timestamp` since better-sqlite3 doesn't support the timestamp type.
    </Callout>
  </TabsContent>
</Tabs>

## DATABASE_URL

When a database is selected, `DATABASE_URL` is added to `.env` and `.env.example` with a default connection string. The `src/config/env.ts` file validates that it's set and exports it as part of the typed `env` object.

| Provider | Example URL |
|----------|-------------|
| PostgreSQL | `postgresql://user:password@localhost:5432/mydb` |
| MySQL | `mysql://user:password@localhost:3306/mydb` |
| SQLite | `./dev.db` or `file:./dev.db` (Prisma) |
