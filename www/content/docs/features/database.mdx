---
title: Database
description: Prisma, Drizzle, and TypeORM setup.
---

PEST.js supports three ORMs. Each one generates its own config, schema, client setup, and a working CRUD route at `/api/examples` so you can see how it all connects.

## Supported providers

All three ORMs work with:

- **PostgreSQL** (recommended for production)
- **MySQL**
- **SQLite** (file-based, no server needed)

## ORM setup

<Tabs defaultValue="prisma">
  <TabsList>
    <TabsTrigger value="prisma"><Prisma className="size-4" />Prisma</TabsTrigger>
    <TabsTrigger value="drizzle"><DrizzleORM className="size-4" />Drizzle</TabsTrigger>
    <TabsTrigger value="typeorm"><TypeORM className="size-4" />TypeORM</TabsTrigger>
  </TabsList>
  <TabsContent value="prisma">
    ### Generated files

    <Files>
      <Folder name="prisma" defaultOpen>
        <File name="schema.prisma" />
      </Folder>
      <Folder name="src" defaultOpen>
        <Folder name="lib" defaultOpen>
          <File name="prisma.ts" />
        </Folder>
        <Folder name="routes" defaultOpen>
          <File name="example.ts" />
        </Folder>
      </Folder>
      <File name="prisma.config.ts" />
    </Files>

    `prisma.ts` exports a singleton PrismaClient instance. The example route uses it directly for queries.

    `prisma.config.ts` is the Prisma configuration file where the database URL is set via `env("DATABASE_URL")`. The `schema.prisma` file does not contain the URL directly â€” this is the modern Prisma pattern.

    ### Scripts

    | Script | Command |
    |--------|---------|
    | `db:generate` | `prisma generate` |
    | `db:migrate` | `prisma migrate dev` |
    | `db:push` | `prisma db push` |
    | `db:studio` | `prisma studio` |

    ### First migration

    After generating your project, run:

    ```bash title="Terminal"
    npx prisma migrate dev --name init
    ```
  </TabsContent>
  <TabsContent value="drizzle">
    ### Generated files

    <Files>
      <Folder name="src" defaultOpen>
        <Folder name="db" defaultOpen>
          <File name="schema.ts" />
          <File name="index.ts" />
        </Folder>
        <Folder name="routes" defaultOpen>
          <File name="example.ts" />
        </Folder>
      </Folder>
      <File name="drizzle.config.ts" />
    </Files>

    `schema.ts` defines your tables. `index.ts` creates and exports the drizzle client. The config file tells `drizzle-kit` where to find your schema and how to connect.

    ### Scripts

    | Script | Command |
    |--------|---------|
    | `db:generate` | `drizzle-kit generate` |
    | `db:migrate` | `drizzle-kit migrate` |
    | `db:push` | `drizzle-kit push` |
    | `db:studio` | `drizzle-kit studio` |

    ### Push your schema

    ```bash title="Terminal"
    npm run db:push
    ```

    <Callout>
      MySQL doesn't support `RETURNING` clauses. The generated code uses `$returningId()` instead of `.returning()` for MySQL.
    </Callout>
  </TabsContent>
  <TabsContent value="typeorm">
    ### Generated files

    <Files>
      <Folder name="src" defaultOpen>
        <Folder name="db" defaultOpen>
          <File name="data-source.ts" />
          <File name="index.ts" />
          <Folder name="entities" defaultOpen>
            <File name="user.ts" />
          </Folder>
        </Folder>
        <Folder name="routes" defaultOpen>
          <File name="example.ts" />
        </Folder>
      </Folder>
    </Files>

    `data-source.ts` configures the TypeORM connection. Entity columns use explicit types (e.g. `@Column("varchar")`) for compatibility with `tsx`/esbuild, which doesn't emit decorator metadata.

    The generated `tsconfig.json` enables `experimentalDecorators` and `emitDecoratorMetadata`.

    ### Scripts

    | Script | Command |
    |--------|---------|
    | `db:migrate` | `typeorm migration:run` |
    | `db:generate` | `typeorm migration:generate` |

    <Callout>
      SQLite uses `datetime` instead of `timestamp` for date columns because better-sqlite3 doesn't support the timestamp type.
    </Callout>
  </TabsContent>
</Tabs>

## DATABASE_URL

When a database is selected, `DATABASE_URL` is added to `.env` and `.env.example`. The `src/config/env.ts` file validates that it's set at startup. See [Environment Variables](/docs/features/environment-variables) for more on how env config works.

| Provider | Example |
|----------|---------|
| PostgreSQL | `postgresql://user:password@localhost:5432/mydb` |
| MySQL | `mysql://user:password@localhost:3306/mydb` |
| SQLite | `./dev.db` or `file:./dev.db` (Prisma) |
